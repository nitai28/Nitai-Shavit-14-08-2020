(this["webpackJsonpshopping-tracking-list"]=this["webpackJsonpshopping-tracking-list"]||[]).push([[0],{185:function(e,t,a){e.exports=a(338)},190:function(e,t,a){},191:function(e,t,a){},215:function(e,t,a){},338:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),l=(a(190),a(191),a(98)),o=a(39),u=a(339),s=a(75),d=a(348),m=a(349),E=u.a.Header,p=function(){return r.a.createElement(u.a,{className:"layout"},r.a.createElement(E,null,r.a.createElement(s.a,{defaultSelectedKeys:["list"],theme:"dark",mode:"horizontal"},r.a.createElement(s.a.Item,{key:"list",icon:r.a.createElement(d.a,null)},r.a.createElement(l.b,{to:"/list"},"Store")),r.a.createElement(s.a.Item,{key:"received",icon:r.a.createElement(m.a,null)},r.a.createElement(l.b,{to:"/received"},"received")))))},f=a(45),b=a(41),I=a(340),h=a(51),v=a.n(h),y=(a(215),function(e){var t=e.tableData,a=void 0===t?[]:t,c=e.withReceivedBtn,i=void 0!==c&&c,l=e.handleReceived,o=void 0===l?function(){return null}:l,u=e.currencyType,s=e.usdToIls,d=Object(n.useState)([]),m=Object(f.a)(d,2),E=m[0],p=m[1],h=[{title:"Name",dataIndex:"name",key:"name"},{title:"Online Store",dataIndex:"store",key:"store"},{title:"Price",dataIndex:"price",key:"price"},{title:"Delivery Est Date",dataIndex:"date",key:"date",render:function(e){return r.a.createElement("span",null,v.a.unix(e/1e3).format("DD/MM/YYYY"))}},{title:"Action",dataIndex:"action",key:"action",render:function(e){return r.a.createElement(b.a,{shape:"round",type:"primary",onClick:function(t){return o(e)}},"Received")}}];return Object(n.useEffect)((function(){a.length>0?p(function(e,t,a,n){var r=[];return e.forEach((function(e,c){var i={key:c,name:e.name,store:e.onlineStore,price:"ILS"===a?e.priceInNIS+" \u20aa":Math.round(e.priceInNIS/n)+" $",date:e.deliveryEstDate};t&&(i.action=e),r.push(i)})),r.sort((function(e,t){return e.date-t.date}))}(a,i,u,s)):p([])}),[a,i,u,s]),r.a.createElement("div",null,E&&r.a.createElement(I.a,{dataSource:E,columns:i?h:h.slice(0,h.length-1)}))}),S=function(e){var t=e.tableData,a=void 0===t?[]:t,c=e.currencyType,i=e.usdToIls,l=Object(n.useState)([]),o=Object(f.a)(l,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){a.length>0?s(function(e,t,a){var n=new Map;e.forEach((function(e){n.has(e.onlineStore)?n.set(e.onlineStore,n.get(e.onlineStore)+Math.round(e.priceInNIS)):n.set(e.onlineStore,Math.round(e.priceInNIS))}));var r=[];return n.forEach((function(e,n){r.push({storeName:n,totalOrdersSum:"ILS"===t?e+" \u20aa":Math.round(e/a)+" $",key:n})})),r}(a,c,i)):s([])}),[a,c,i]),r.a.createElement("div",null,u&&r.a.createElement(I.a,{style:{width:"50vw",margin:"35px auto"},dataSource:u,columns:[{title:"Store Name",dataIndex:"storeName",key:"storeName"},{title:"Total Items Sum",dataIndex:"totalOrdersSum",key:"totalOrdersSum"}]}))},O=a(67),D=a(350),T=Object(O.b)((function(e){var t=e.bought;return{receivedItems:t.receivedItems,usdToNis:t.usdToNis}}))((function(e){var t=e.receivedItems,a=e.usdToNis,c=Object(n.useState)("ILS"),i=Object(f.a)(c,2),l=i[0],o=i[1],u=Object(n.useState)(a),s=Object(f.a)(u,2),d=s[0],m=s[1];return Object(n.useEffect)((function(){m(a)}),[a]),r.a.createElement("div",null,r.a.createElement("h1",null,"Received items"),r.a.createElement("div",{style:{margin:"15px"}},r.a.createElement(D.a,{onChange:function(e){return o(e?"ILS":"USD")},checkedChildren:"\u20aa ILS",unCheckedChildren:"$ USD",defaultChecked:!0})),r.a.createElement(y,{usdToIls:d,currencyType:l,tableData:t}),r.a.createElement(S,{usdToIls:d,currencyType:l,tableData:t}))})),j=a(341),N=a(343),g=a(344),k=a(346),_=a(101),R=a(342),C=function(e){var t=e.showModal,a=e.closeModal,n=e.onFormSubmit,c=j.a.useForm(),i=Object(f.a)(c,1)[0];return r.a.createElement("div",null,r.a.createElement(N.a,{title:"Add new item",visible:t,okText:"submit",okButtonProps:{form:"add-item-form",key:"submit",htmlType:"submit"},onCancel:a},r.a.createElement(j.a,{labelCol:{span:12},wrapperCol:{span:14},layout:"vertical",form:i,id:"add-item-form",size:"small",onFinish:function(){i.validateFields().then((function(e){e.deliveryEstDate=1e3*v()(e.deliveryEstDate).unix(),n(e),i.resetFields(),a()}))}},r.a.createElement(j.a.Item,{name:"itemName",rules:[{required:!0}],label:"Item name"},r.a.createElement(g.a,null)),r.a.createElement(j.a.Item,{name:"storeName",rules:[{required:!0}],label:"Store name"},r.a.createElement(g.a,null)),r.a.createElement(j.a.Item,{name:"price",rules:[{required:!0,type:"number",min:1}],label:"Price"},r.a.createElement(k.a,null)),r.a.createElement(j.a.Item,{name:"currencyType",rules:[{required:!0}],label:"Currency"},r.a.createElement(_.a,null,r.a.createElement(_.a.Option,{value:"usd"},"$(USD)"),r.a.createElement(_.a.Option,{value:"nis"},"\u20aa(ILS)"))),r.a.createElement(j.a.Item,{name:"deliveryEstDate",rules:[{required:!0,type:"date",min:Date.now(),message:"date must be later then now"}],label:"Delivery EST Date"},r.a.createElement(R.a,{disabledDate:function(e){return v()(e).unix()<Date.now()/1e3}})))))},U=a(347),x=a(123),A=Object(O.b)((function(e){var t=e.bought;return{items:t.items,usdToNis:t.usdToNis}}),(function(e){return{moveItemFromBoughtToReceived:function(t){return e((a=t,function(e,t){e({type:"UPDATE_RECEIVED_AND_BOUGHT_LIST",payload:{updatedBoughtItems:t().bought.items.filter((function(e){return e.id!==a.id})),updatedReceivedItems:[].concat(Object(x.a)(t().bought.receivedItems),[a])}})}));var a},addBoughtItem:function(t){return e(function(e){return function(t){t({type:"ADD_NEW_BOUGHT_ITEM",payload:e})}}(t))}}}))((function(e){var t=e.items,a=e.moveItemFromBoughtToReceived,c=e.addBoughtItem,i=e.usdToNis,l=Object(n.useState)(!1),o=Object(f.a)(l,2),u=o[0],s=o[1],d=Object(n.useState)("ILS"),m=Object(f.a)(d,2),E=m[0],p=m[1],I=Object(n.useState)(i),h=Object(f.a)(I,2),v=h[0],O=h[1],T=Object(n.useCallback)((function(e){var t={name:e.itemName,onlineStore:e.storeName,deliveryEstDate:e.deliveryEstDate,priceInNIS:"usd"===e.currencyType?Math.round(e.price*i):e.price,id:Date.now()};c(t)}),[i,c]);return Object(n.useEffect)((function(){O(i)}),[i]),r.a.createElement("div",null,r.a.createElement(C,{onFormSubmit:T,closeModal:function(){return s(!1)},showModal:u}),r.a.createElement("h1",null,"Bought items"),r.a.createElement(b.a,{onClick:function(){return s(!0)},type:"primary",icon:r.a.createElement(U.a,null)},"Add item"),r.a.createElement("div",{style:{margin:"15px"}},r.a.createElement(D.a,{onChange:function(e){return p(e?"ILS":"USD")},checkedChildren:"\u20aa ILS",unCheckedChildren:"$ USD",defaultChecked:!0})),r.a.createElement(y,{usdToIls:v,currencyType:E,handleReceived:function(e){a(e)},withReceivedBtn:!0,tableData:t}),r.a.createElement(S,{usdToIls:v,currencyType:E,tableData:t}))})),w=a(345),L=Object(O.b)((function(e){return{apiError:e.bought.apiError}}),(function(e){return{calculateCurrentUsd:function(){return e((function(e){fetch("https://api.exchangeratesapi.io/latest?base=USD&symbols=ILS",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e({type:"UPDATE_USD_TO_NIS",payload:+t.rates.ILS.toFixed(2)})})).catch((function(t){e({type:"UPDATE_API_ERROR"})}))}))},clearError:function(){return e((function(e){e({type:"CLEAR_API_ERROR"})}))}}}))((function(e){var t=e.calculateCurrentUsd,a=e.apiError,c=e.clearError;return Object(n.useEffect)((function(){t();var e=setInterval((function(){return t()}),1e4);return function(){clearInterval(e)}}),[t]),Object(n.useEffect)((function(){a&&(w.b.error({content:a,className:"custom-class",style:{marginTop:"10vh",fontSize:"18px"}},6),c())}),[a,c]),r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,component:T,path:"/received"}),r.a.createElement(o.b,{exact:!0,component:A,path:"/list"}),r.a.createElement(o.b,{path:"/"},r.a.createElement(o.a,{from:"/",to:"list"}))))))})),B=a(74),M=a(90),P={items:[{id:1,name:"iPhone 11",onlineStore:"amazon",priceInNIS:3350,deliveryEstDate:1597300125117},{id:2,name:"Samsung U65",onlineStore:"ebay",priceInNIS:500,deliveryEstDate:1597395965183},{id:3,name:"LG TV",onlineStore:"ebay",priceInNIS:1500,deliveryEstDate:1596666965183}],receivedItems:[],usdToNis:0,apiError:""},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_RECEIVED_AND_BOUGHT_LIST":return Object(M.a)({},e,{items:t.payload.updatedBoughtItems,receivedItems:t.payload.updatedReceivedItems});case"ADD_NEW_BOUGHT_ITEM":return Object(M.a)({},e,{items:[].concat(Object(x.a)(e.items),[t.payload])});case"UPDATE_USD_TO_NIS":return Object(M.a)({},e,{usdToNis:t.payload});case"UPDATE_API_ERROR":return Object(M.a)({},e,{apiError:"Failed to update currency rate"});case"CLEAR_API_ERROR":return Object(M.a)({},e,{apiError:""});default:return e}},G=Object(B.c)({bought:F}),q=a(179),H=Object(B.d)(G,Object(B.a)(q.a));i.a.render(r.a.createElement(O.a,{store:H},r.a.createElement(L,null)),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.737d5fa4.chunk.js.map